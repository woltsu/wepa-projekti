<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.springframework.org/security/tags">
    <head th:replace="fragments/head :: head">
        <title>navbar</title>
        <link href="../../css/style.css" th:href="@{/css/style.css}" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div th:fragment="navbar">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>                        
                        </button>
                        <a class="navbar-brand" th:href="@{/index}">Front page</a>
                    </div>
                    <div class="collapse navbar-collapse" id="myNavbar">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown" sec:authorize="isAuthenticated()">
                                <a id="toggleDropdown" class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-user"></span> Profile <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a id="myQuestions" th:href="@{/{user}/questions(user=${user.username})}">My questions</a></li>
                                    <li><a id="myStats" th:href="@{/{user}/stats(user=${user.username})}">My stats</a></li>
                                </ul>
                            </li>
                            <li sec:authorize="isAnonymous()"><a id="signup" th:href="@{/signup}"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                            <li sec:authorize="isAnonymous()"><a th:href="@{/login}"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                            <li sec:authorize="isAuthenticated()"><a th:href="@{/logout}" name="logout" id="logout"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                        </ul>
                        <div sec:authorize="isAuthenticated()" class="col-sm-2 col-md-2 pull-right">
                            <form id="questionSearch" class="navbar-form" role="search" th:method="get" th:action="@{/search}">
                                <div class="input-group">
                                    <input id="questionId" type="text" class="form-control" placeholder="Question id" name="question_id" pattern="[0-9.]+" oninvalid="this.setCustomValidity('Please check that your input is a positive number')" oninput="setCustomValidity('')"/>
                                    <div class="input-group-btn">
                                        <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="alert" th:if="${errors}">
                <span class="closebtn" onclick="this.parentElement.style.display = 'none';">&times;</span> 
                <div th:each="error : ${errors}">
                    <span th:text="${error}">error</span>
                </div>
            </div>
            <div class="success" th:if="${success}">
                <span class="closebtn" onclick="this.parentElement.style.display = 'none';">&times;</span> 
                <span th:text="${success}">success</span>
            </div>
        </div>
    </body>
</html>